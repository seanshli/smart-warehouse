# 🧪 iFLYTEK 語音識別測試步驟

## ✅ 已完成

1. ✅ 環境變數已添加到 `.env.local`
2. ✅ 開發服務器已啟動（後台運行）

## 🎯 現在請執行以下步驟

### 步驟 3: 打開應用

在瀏覽器中打開：
```
http://localhost:3000
```

### 步驟 4: 測試語音功能

#### 4.1 登入系統
- 使用您的帳號登入

#### 4.2 進入物品管理
- 點擊「物品」或「Items」標籤
- 選擇任意一個物品

#### 4.3 調整數量並錄製語音

1. **點擊物品的「調整數量」按鈕**（通常顯示為 +/- 圖標）
2. **輸入負數**（例如：`-1`）來減少數量
3. **您會看到「語音評論」選項出現**
4. **點擊麥克風圖標** 🎤 開始錄音
5. **說一段話**（建議說中文，例如：「這個物品已經用完了」）
6. **點擊停止按鈕** ⏹️ 結束錄音
7. **點擊「確認」或「提交」按鈕**

### 步驟 5: 查看服務器日誌

在終端中查看服務器輸出，您應該看到：

**成功情況（iFLYTEK）：**
```
Attempting transcription with iFLYTEK...
✓ iFLYTEK transcription successful
```

**備選情況（OpenAI）：**
```
Attempting transcription with iFLYTEK...
iFLYTEK transcription failed or empty, falling back to OpenAI...
✓ OpenAI transcription successful (fallback)
```

### 步驟 6: 驗證轉錄結果

1. **回到物品列表**
2. **點擊剛才操作的物品的「歷史」按鈕**（時鐘圖標）
3. **在歷史記錄中，您應該看到：**
   - 🎵 **語音播放按鈕**（可以播放錄音）
   - 📝 **轉錄文字框**（藍色背景，顯示識別的文字）

### 步驟 7: 測試搜索功能

1. **錄製包含物品名稱的語音**（例如：「這個咖啡杯很好用」）
2. **在搜索框輸入轉錄文字中的關鍵詞**（例如：「咖啡杯」）
3. **確認能找到對應的物品**

## 🔍 調試提示

### 查看服務器日誌

如果看不到日誌輸出，可以：
1. 查看運行 `npm run dev` 的終端窗口
2. 或者重新啟動服務器（停止當前進程，然後運行 `npm run dev`）

### 常見問題

**Q: 看不到語音評論選項？**
- A: 確保您是在「減少數量」時（調整值為負數），語音評論只在減少數量時顯示

**Q: 轉錄失敗？**
- A: 檢查服務器日誌查看具體錯誤信息

**Q: 只看到 OpenAI 日誌，沒有 iFLYTEK？**
- A: 檢查 iFLYTEK API 憑證是否正確，或查看是否有認證錯誤

## 📊 測試檢查清單

測試時請確認：

- [ ] 服務器正常運行在 http://localhost:3000
- [ ] 可以登入系統
- [ ] 可以看到物品列表
- [ ] 可以調整物品數量（減少）
- [ ] 可以看到語音評論錄製選項
- [ ] 可以成功錄製語音
- [ ] 語音成功提交到服務器
- [ ] 服務器日誌顯示轉錄過程
- [ ] 轉錄文字顯示在歷史記錄中
- [ ] 可以播放語音
- [ ] 搜索功能可以找到轉錄文字

## 🎯 下一步

測試完成後，您可以：
- 測試不同語言的語音識別（中文、英文、日文）
- 測試長語音（超過 10 秒）
- 測試搜索功能的準確度
- 檢查轉錄準確度

---

**注意**：開發服務器已在後台運行。如果需要查看實時日誌，可以在終端中運行 `npm run dev`（會在前台運行，可以看到所有日誌輸出）。

