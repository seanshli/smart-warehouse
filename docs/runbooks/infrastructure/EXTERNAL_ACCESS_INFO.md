# 🌐 外部訪問模式說明

## 區別說明

### `npm run dev` (內部模式)
- 只能從本機訪問：`http://localhost:3000`
- 適用於：純本地測試
- **不適合**：移動設備、不同網絡的設備訪問

### `npm run dev:external` (外部模式) ✅ 當前使用
- 可以從本地網絡訪問：`http://172.20.10.4:3000`
- 可以從其他設備訪問（同一個 WiFi 網絡）
- 適用於：
  - 從 iPhone/Android 設備測試
  - 從其他電腦訪問
  - 測試移動端功能

## 當前設置

**服務器已啟動為外部訪問模式**

### 訪問地址：
- **本地訪問**: `http://localhost:3000`
- **網絡訪問**: `http://172.20.10.4:3000` (從其他設備)

### 從移動設備訪問：
1. 確保手機/平板與電腦在同一 WiFi 網絡
2. 在瀏覽器或應用中輸入：`http://172.20.10.4:3000`
3. 如果使用 iOS/Android 應用，確保 Capacitor 配置指向此地址

## 為什麼使用外部模式？

對於 iFLYTEK 語音識別測試：
- ✅ 可以從真實移動設備測試語音錄製
- ✅ 可以測試移動端語音功能
- ✅ 更接近生產環境

## 測試 iFLYTEK 語音識別

### 選項 1: 從電腦瀏覽器
```
http://localhost:3000
```

### 選項 2: 從手機瀏覽器
```
http://172.20.10.4:3000
```
（確保手機與電腦在同一 WiFi）

### 選項 3: 從 iOS/Android 應用
需要更新 Capacitor 配置：
```typescript
// capacitor.config.ts
server: {
  url: 'http://172.20.10.4:3000',
  cleartext: true
}
```

然後運行：
```bash
npx cap copy
```

## 安全注意事項

⚠️ **開發模式**：
- HTTP（非 HTTPS）
- 允許所有 CORS 請求
- 僅用於開發和測試

✅ **生產模式**：
- 使用 HTTPS
- 部署到 Vercel/Netlify
- 正確的 CORS 配置

## 切換回內部模式

如果需要切換回內部模式（僅本地訪問）：
```bash
# 停止當前服務器
pkill -f "next dev"

# 啟動內部模式
npm run dev
```

