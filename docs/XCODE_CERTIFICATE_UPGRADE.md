# Xcode è­‰æ›¸å‡ç´šæŒ‡å—
## Xcode Certificate Upgrade Guide

æœ¬æŒ‡å—èªªæ˜å¦‚ä½•åœ¨ Xcode ä¸­æ›´æ–° iOS é–‹ç™¼è€…è­‰æ›¸å’Œé…ç½®æ–‡ä»¶ã€‚
<!-- This guide explains how to update iOS developer certificates and provisioning profiles in Xcode. -->

## ğŸ“‹ è­‰æ›¸é¡å‹ / Certificate Types

### é–‹ç™¼è­‰æ›¸ / Development Certificate
- **ç”¨é€”**ï¼šç”¨æ–¼åœ¨é–‹ç™¼éç¨‹ä¸­åœ¨çœŸæ©Ÿä¸Šæ¸¬è©¦æ‡‰ç”¨
- **æœ‰æ•ˆæœŸ**ï¼šé€šå¸¸ç‚º 1 å¹´
- **ä½ç½®**ï¼šKeychain Accessï¼ˆé‘°åŒ™ä¸²è¨ªå•ï¼‰

### åˆ†ç™¼è­‰æ›¸ / Distribution Certificate
- **ç”¨é€”**ï¼šç”¨æ–¼æ§‹å»º App Store æˆ– Ad Hoc åˆ†ç™¼ç‰ˆæœ¬
- **æœ‰æ•ˆæœŸ**ï¼šé€šå¸¸ç‚º 1 å¹´
- **ä½ç½®**ï¼šKeychain Accessï¼ˆé‘°åŒ™ä¸²è¨ªå•ï¼‰

### é…ç½®æ–‡ä»¶ / Provisioning Profile
- **ç”¨é€”**ï¼šå°‡è­‰æ›¸ã€App ID å’Œè¨­å‚™ç¶å®šåœ¨ä¸€èµ·
- **æœ‰æ•ˆæœŸ**ï¼šé€šå¸¸ç‚º 1 å¹´
- **ä½ç½®**ï¼šXcode è‡ªå‹•ç®¡ç†æˆ–æ‰‹å‹•ä¸‹è¼‰

## ğŸ”„ æ–¹æ³•ä¸€ï¼šè‡ªå‹•æ›´æ–°ï¼ˆæ¨è–¦ï¼‰/ Method 1: Automatic Update (Recommended)

### æ­¥é©Ÿ 1: æª¢æŸ¥è­‰æ›¸ç‹€æ…‹

1. **æ‰“é–‹ Xcode**
2. **é¸æ“‡å°ˆæ¡ˆ**ï¼šæ‰“é–‹ `ios/App/App.xcodeproj`
3. **é¸æ“‡ Target**ï¼šåœ¨å·¦å´å°èˆªæ¬„é¸æ“‡ `App`
4. **æ‰“é–‹ Signing & Capabilities æ¨™ç±¤**
5. **æª¢æŸ¥ç‹€æ…‹**ï¼š
   - âœ… ç¶ è‰²å‹¾è™Ÿï¼šè­‰æ›¸æœ‰æ•ˆ
   - âš ï¸ é»ƒè‰²è­¦å‘Šï¼šè­‰æ›¸å³å°‡éæœŸ
   - âŒ ç´…è‰²éŒ¯èª¤ï¼šè­‰æ›¸å·²éæœŸæˆ–ç„¡æ•ˆ

### æ­¥é©Ÿ 2: è‡ªå‹•æ›´æ–°è­‰æ›¸

1. **åœ¨ Signing & Capabilities æ¨™ç±¤ä¸­**
2. **å‹¾é¸ "Automatically manage signing"**ï¼ˆè‡ªå‹•ç®¡ç†ç°½åï¼‰
3. **é¸æ“‡ Team**ï¼šé¸æ“‡æ‚¨çš„é–‹ç™¼è€…å¸³è™Ÿ
4. **Xcode æœƒè‡ªå‹•**ï¼š
   - æª¢æŸ¥è­‰æ›¸ç‹€æ…‹
   - å‰µå»ºæ–°çš„è­‰æ›¸ï¼ˆå¦‚éœ€è¦ï¼‰
   - ä¸‹è¼‰ä¸¦å®‰è£é…ç½®æ–‡ä»¶
   - æ›´æ–°å°ˆæ¡ˆè¨­ç½®

### æ­¥é©Ÿ 3: é©—è­‰æ›´æ–°

1. **æª¢æŸ¥ Bundle Identifier**ï¼šç¢ºèªæ­£ç¢º
2. **æª¢æŸ¥ Signing Certificate**ï¼šæ‡‰é¡¯ç¤º "Apple Development" æˆ– "Apple Distribution"
3. **æª¢æŸ¥ Provisioning Profile**ï¼šæ‡‰é¡¯ç¤ºæœ€æ–°çš„é…ç½®æ–‡ä»¶

## ğŸ”§ æ–¹æ³•äºŒï¼šæ‰‹å‹•æ›´æ–° / Method 2: Manual Update

### æ­¥é©Ÿ 1: åœ¨ Apple Developer ç¶²ç«™æ›´æ–°è­‰æ›¸

1. **ç™»å…¥ Apple Developer**
   - è¨ªå•ï¼šhttps://developer.apple.com/account
   - ä½¿ç”¨æ‚¨çš„ Apple ID ç™»å…¥

2. **å‰å¾€ Certificates, Identifiers & Profiles**
   - é»æ“Šå·¦å´å°èˆªæ¬„çš„ **Certificates**

3. **æª¢æŸ¥ç¾æœ‰è­‰æ›¸**
   - æŸ¥çœ‹è­‰æ›¸åˆ—è¡¨
   - ç¢ºèªå“ªäº›è­‰æ›¸å³å°‡éæœŸæˆ–å·²éæœŸ

4. **å‰µå»ºæ–°è­‰æ›¸**ï¼ˆå¦‚éœ€è¦ï¼‰
   - é»æ“Š **+** æŒ‰éˆ•
   - é¸æ“‡è­‰æ›¸é¡å‹ï¼š
     - **Apple Development**ï¼šé–‹ç™¼è­‰æ›¸
     - **Apple Distribution**ï¼šåˆ†ç™¼è­‰æ›¸
   - æŒ‰ç…§æŒ‡ç¤ºå®Œæˆè­‰æ›¸å‰µå»º

5. **ä¸‹è¼‰è­‰æ›¸**
   - é»æ“Šè­‰æ›¸åç¨±
   - é»æ“Š **Download** æŒ‰éˆ•
   - é›™æ“Šä¸‹è¼‰çš„ `.cer` æ–‡ä»¶å®‰è£åˆ° Keychain

### æ­¥é©Ÿ 2: æ›´æ–°é…ç½®æ–‡ä»¶

1. **å‰å¾€ Provisioning Profiles**
   - åœ¨ Apple Developer ç¶²ç«™é»æ“Š **Profiles**

2. **æª¢æŸ¥é…ç½®æ–‡ä»¶ç‹€æ…‹**
   - æŸ¥çœ‹å“ªäº›é…ç½®æ–‡ä»¶å³å°‡éæœŸ
   - é»æ“Šé…ç½®æ–‡ä»¶åç¨±æŸ¥çœ‹è©³æƒ…

3. **ç·¨è¼¯é…ç½®æ–‡ä»¶**
   - é»æ“Š **Edit**
   - é¸æ“‡æ–°çš„è­‰æ›¸
   - ç¢ºèª App ID å’Œè¨­å‚™åˆ—è¡¨
   - é»æ“Š **Generate** ç”Ÿæˆæ–°é…ç½®æ–‡ä»¶

4. **ä¸‹è¼‰é…ç½®æ–‡ä»¶**
   - é»æ“Š **Download** æŒ‰éˆ•
   - é›™æ“Šä¸‹è¼‰çš„ `.mobileprovision` æ–‡ä»¶å®‰è£

### æ­¥é©Ÿ 3: åœ¨ Xcode ä¸­æ›´æ–°

1. **æ‰“é–‹ Xcode**
2. **å‰å¾€ Preferences**
   - **Xcode > Settings** (æˆ– **Preferences**)
   - é»æ“Š **Accounts** æ¨™ç±¤

3. **æ›´æ–°å¸³è™Ÿ**
   - é¸æ“‡æ‚¨çš„ Apple ID
   - é»æ“Š **Download Manual Profiles**ï¼ˆå¦‚éœ€è¦ï¼‰
   - é»æ“Š **Manage Certificates** æŸ¥çœ‹è­‰æ›¸

4. **åœ¨å°ˆæ¡ˆä¸­æ›´æ–°**
   - æ‰“é–‹å°ˆæ¡ˆçš„ **Signing & Capabilities**
   - å–æ¶ˆå‹¾é¸ "Automatically manage signing"ï¼ˆå¦‚ä½¿ç”¨æ‰‹å‹•æ–¹å¼ï¼‰
   - é¸æ“‡æ–°çš„é…ç½®æ–‡ä»¶
   - ç¢ºèªè­‰æ›¸æ­£ç¢º

## ğŸ” æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Xcode å‘½ä»¤åˆ—å·¥å…· / Method 3: Using Xcode Command Line

### æª¢æŸ¥è­‰æ›¸ç‹€æ…‹

```bash
# åˆ—å‡ºæ‰€æœ‰è­‰æ›¸
security find-identity -v -p codesigning

# åˆ—å‡ºæ‰€æœ‰é…ç½®æ–‡ä»¶
ls ~/Library/MobileDevice/Provisioning\ Profiles/
```

### æ¸…ç†èˆŠè­‰æ›¸å’Œé…ç½®æ–‡ä»¶

```bash
# æ¸…ç†éæœŸçš„é…ç½®æ–‡ä»¶
rm ~/Library/MobileDevice/Provisioning\ Profiles/*.mobileprovision

# åœ¨ Xcode ä¸­é‡æ–°ä¸‹è¼‰
# æ‰“é–‹ Xcode > Settings > Accounts > Download Manual Profiles
```

## âš ï¸ å¸¸è¦‹å•é¡Œ / Common Issues

### å•é¡Œ 1: è­‰æ›¸éæœŸéŒ¯èª¤

**éŒ¯èª¤è¨Šæ¯**ï¼š
```
Code signing is required for product type 'Application' in SDK 'iOS'
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥è­‰æ›¸æ˜¯å¦éæœŸ
2. åœ¨ Apple Developer ç¶²ç«™å‰µå»ºæ–°è­‰æ›¸
3. åœ¨ Xcode ä¸­æ›´æ–°è­‰æ›¸é¸æ“‡

### å•é¡Œ 2: é…ç½®æ–‡ä»¶ä¸åŒ¹é…

**éŒ¯èª¤è¨Šæ¯**ï¼š
```
Provisioning profile doesn't match the bundle identifier
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºèª Bundle Identifier æ­£ç¢º
2. åœ¨ Apple Developer ç¶²ç«™æ›´æ–°é…ç½®æ–‡ä»¶
3. åœ¨ Xcode ä¸­é‡æ–°é¸æ“‡é…ç½®æ–‡ä»¶

### å•é¡Œ 3: ç„¡æ³•è‡ªå‹•ç®¡ç†ç°½å

**éŒ¯èª¤è¨Šæ¯**ï¼š
```
Failed to register bundle identifier
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºèª Apple Developer å¸³è™Ÿæœ‰æ•ˆ
2. ç¢ºèª App ID å·²åœ¨ Apple Developer ç¶²ç«™è¨»å†Š
3. æª¢æŸ¥ç¶²è·¯é€£æ¥
4. å˜—è©¦æ‰‹å‹•ç®¡ç†ç°½å

### å•é¡Œ 4: å¤šå€‹è­‰æ›¸è¡çª

**éŒ¯èª¤è¨Šæ¯**ï¼š
```
Multiple certificates found
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. åœ¨ Keychain Access ä¸­åˆªé™¤èˆŠè­‰æ›¸
2. åªä¿ç•™æœ€æ–°çš„è­‰æ›¸
3. åœ¨ Xcode ä¸­é‡æ–°é¸æ“‡

## ğŸ“ æœ€ä½³å¯¦è¸ / Best Practices

### 1. å®šæœŸæª¢æŸ¥è­‰æ›¸ç‹€æ…‹
- æ¯æœˆæª¢æŸ¥ä¸€æ¬¡è­‰æ›¸æœ‰æ•ˆæœŸ
- åœ¨è­‰æ›¸éæœŸå‰ 30 å¤©æ›´æ–°

### 2. ä½¿ç”¨è‡ªå‹•ç®¡ç†ç°½å
- å°æ–¼å¤§å¤šæ•¸æƒ…æ³ï¼Œè‡ªå‹•ç®¡ç†ç°½åæ˜¯æœ€ç°¡å–®çš„æ–¹å¼
- Xcode æœƒè‡ªå‹•è™•ç†è­‰æ›¸å’Œé…ç½®æ–‡ä»¶

### 3. å‚™ä»½è­‰æ›¸
- å°å‡ºè­‰æ›¸åˆ° `.p12` æ–‡ä»¶
- ä¿å­˜åˆ°å®‰å…¨çš„ä½ç½®
- è¨˜éŒ„è­‰æ›¸å¯†ç¢¼

### 4. åœ˜éšŠå”ä½œ
- ç¢ºä¿æ‰€æœ‰åœ˜éšŠæˆå“¡éƒ½æœ‰æœ‰æ•ˆçš„è­‰æ›¸
- ä½¿ç”¨å…±äº«çš„é–‹ç™¼è€…å¸³è™Ÿæˆ–ä¼æ¥­å¸³è™Ÿ
- å®šæœŸåŒæ­¥é…ç½®æ–‡ä»¶

## ğŸ” å°å‡ºå’Œå‚™ä»½è­‰æ›¸ / Export and Backup Certificates

### å°å‡ºè­‰æ›¸åˆ° .p12 æ–‡ä»¶

1. **æ‰“é–‹ Keychain Access**
   - æ‡‰ç”¨ç¨‹å¼ > å·¥å…·ç¨‹å¼ > é‘°åŒ™ä¸²å­˜å–

2. **é¸æ“‡è­‰æ›¸**
   - åœ¨å·¦å´é¸æ“‡ **æˆ‘çš„æ†‘è­‰**
   - æ‰¾åˆ°æ‚¨çš„é–‹ç™¼è€…è­‰æ›¸

3. **å°å‡ºè­‰æ›¸**
   - å³éµé»æ“Šè­‰æ›¸
   - é¸æ“‡ **åŒ¯å‡º**
   - é¸æ“‡æ ¼å¼ï¼š**Personal Information Exchange (.p12)**
   - è¨­å®šå¯†ç¢¼
   - ä¿å­˜æ–‡ä»¶

### æ¢å¾©è­‰æ›¸

1. **é›™æ“Š `.p12` æ–‡ä»¶**
2. **è¼¸å…¥å¯†ç¢¼**
3. **è­‰æ›¸æœƒè‡ªå‹•å®‰è£åˆ° Keychain**

## ğŸ“± Smart Warehouse å°ˆæ¡ˆç‰¹å®šè¨­ç½®

### ç•¶å‰é…ç½®

- **Bundle Identifier**: `com.smartwarehouse.app`
- **Team**: `M358UZHL82`
- **Development Team**: éœ€è¦åœ¨ Xcode ä¸­ç¢ºèª

### æ›´æ–°æ­¥é©Ÿ

1. **æ‰“é–‹å°ˆæ¡ˆ**
   ```bash
   open ios/App/App.xcodeproj
   ```

2. **æª¢æŸ¥ Signing & Capabilities**
   - é¸æ“‡ **App** target
   - ç¢ºèª **Team** æ­£ç¢º
   - ç¢ºèª **Bundle Identifier** ç‚º `com.smartwarehouse.app`

3. **æ›´æ–°è­‰æ›¸**
   - å¦‚æœä½¿ç”¨è‡ªå‹•ç®¡ç†ï¼ŒXcode æœƒè‡ªå‹•è™•ç†
   - å¦‚æœä½¿ç”¨æ‰‹å‹•ç®¡ç†ï¼Œé¸æ“‡æ–°çš„é…ç½®æ–‡ä»¶

## ğŸ”— ç›¸é—œè³‡æº / Related Resources

- **Apple Developer Portal**: https://developer.apple.com/account
- **Xcode æ–‡æª”**: https://developer.apple.com/documentation/xcode
- **è­‰æ›¸ç®¡ç†æŒ‡å—**: https://developer.apple.com/support/certificates/

---

**æ³¨æ„**ï¼šè­‰æ›¸æ›´æ–°å¾Œï¼Œå¯èƒ½éœ€è¦é‡æ–°æ§‹å»ºæ‡‰ç”¨ç¨‹å¼ã€‚ç¢ºä¿åœ¨æ›´æ–°è­‰æ›¸å¾Œé€²è¡Œå®Œæ•´çš„æ§‹å»ºæ¸¬è©¦ã€‚

